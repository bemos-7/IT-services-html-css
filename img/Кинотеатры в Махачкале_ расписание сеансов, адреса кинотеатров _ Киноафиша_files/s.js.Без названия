!function(t){var e={};function s(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=t,s.c=e,s.d=function(t,e,n){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(n,i,function(e){return t[e]}.bind(null,i));return n},s.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="",s(s.s=3)}([function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));let n={GETPATH:t=>`https://cdn.advertronic.io/b/${t}.json`,GEOHEADER:"Content-Geo",LANG:"ru",CONSOLE:"advertronic_console=1",BIDDERSTIMEOUT:600,SLOT_VIEW:"banner",SLOT_FILL:"observer",SLOT_FILL_BOTTOM:"0px",BANNERTIMEOUT:1e4,VERSION:"2.3.14",EVENTS:{SLOTS:{BEFOREADD:"advertronic_slotsBeforeAdd"},SLOT:{ADD:"advertronic_slotAdd",CHANGESTATE:"advertronic_slotChangeState",CLOSE:"advertronic_slotClose",EXTERNAL:"advertronic_slotExternal"},BANNERS:{BEFOREADD:"advertronic_bannersBeforeAdd"},BANNER:{CHANGESTATE:"advertronic_bannerChangeState"}}};n=-1===location.search.indexOf("advertronic_dev=1")?n:Object.assign(n,{GETPATH:t=>"/frontend/src/json/advertronic.json",LANG:"ru"})},function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return myConsole}));var _vars_js__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(2);const NAME="ADVERTRONIC",ISCONSOLE=_vars_js__WEBPACK_IMPORTED_MODULE_0__.a.get("isConsole"),CODES={0:{category:"version",message:'version: "${data.version}"'},12:{category:"response",message:"Missing language in response"},13:{category:"response",message:'content-geo:"${data.lang}"'},21:{category:"methods",message:"Method ${data.name} does not exist"},31:{category:"slot",message:'There are no parameters set for the slot "${data.name}"'},51:{category:"bannerAdfox",message:'BannerAdfox \n  slot: "${data.slotId}" \n  state: ${data.state}'}},myConsole=function(code,data,type="log",qwe=""){if(!ISCONSOLE)return;const message=CODES[code]?eval("`"+CODES[code].message+"`"):code;console[type](NAME+"\n "+message,qwe)}},function(t,e,s){"use strict";s.d(e,"a",(function(){return o}));var n=s(0);const i={breakpoints:{},bidding:{},device:void 0,isConsole:-1!==location.search.indexOf(n.a.CONSOLE)},o={get:function(t){return i[t]},set:function(t,e){i[t]=e}}},function(t,e,s){t.exports=s(5)},function(t,e){document.head.insertAdjacentHTML("afterbegin","\n    <style>\n        advertronic-slot{\n            display:flex;\n            align-items: center;\n            justify-content: center;\n        }\n    </style>")},function(t,e,s){"use strict";s.r(e);var n={};s.r(n),s.d(n,"vars",(function(){return o.a})),s.d(n,"watchSlotState",(function(){return g})),s.d(n,"watchSlotStateCancel",(function(){return f})),s.d(n,"watchBannersState",(function(){return v})),s.d(n,"watchBannersStateCancel",(function(){return m})),s.d(n,"slots",(function(){return P}));s(4);var i=s(0),o=s(2),r=s(1);function a(t,e,s){s=s||window;var n=!1,i=function(){n||(n=!0,requestAnimationFrame((function(){e(),n=!1})))};return s.addEventListener(t,i),{tag:s,eName:t,func:i}}let c,d,l;const h=function(){let t="desktop";for(let e in d){let s=d[e];if(window.matchMedia(`(max-width: ${s}px)`).matches){t=e;break}}return t},u=function(t){d=o.a.get("breakpoints"),c=h(),o.a.set("device",c),function(t){const e=()=>{let e=h();c!==e&&(c=e,o.a.set("device",c),t(c))};l=a("resize",e),l=a("orientationChange",e)}(t)};function g(t,e){const s=P;let n="string"==typeof t?s.getBySelector(t):t;const o=function(t){t.addEventListener(i.a.EVENTS.SLOT.CHANGESTATE,e)},r=function(e){const i=e.args.tag,a=e.args.slot;i.matches(t)&&(s.removeListener("BEFOREADD",r),n=a,o(i))};return n?(o(n.tag),n.changeState()):s.addListener("BEFOREADD",r),n}function f(t,e){t.tag.removeEventListener(i.a.EVENTS.SLOT.CHANGESTATE,e),delete t.onChangeState}function v(t,e){let s="string"==typeof t?P.getBySelector(t):t;const n=function(t){t.addEventListener(i.a.EVENTS.BANNER.CHANGESTATE,o)},o=function(t){t.args.slot=s,t.args.callback=o,e(t)},r=function(t){f(t.args.slot,r),s=t.args.slot,n(s.tag)};if(s){n(s.tag),s.getCurrentBanner().changeState()}else g(t,r);return{isSlotExist:s}}function m(t){const e=t.args;e.slot.tag.removeEventListener(i.a.EVENTS.BANNER.CHANGESTATE,e.callback)}let b=!1;const _=[{src:"https://yandex.ru/ads/system/header-bidding.js",async:""},{src:"https://yandex.ru/ads/system/context.js",async:""}],p=function(){window.YaHeaderBiddingSettings=o.a.get("bidding"),window.yaContextCb=window.yaContextCb||[];const t=document.createDocumentFragment();_.forEach(e=>{const s=document.createElement("SCRIPT");for(let t in e)s.setAttribute(t,e[t]);t.appendChild(s)}),document.head.appendChild(t)},E=function(t){b?t():(p(),b=!0,t())};let y=!1;const T=[{src:"//securepubads.g.doubleclick.net/tag/js/gpt.js",async:""}],S=function(t,e){y?t():(!function(){window.googletag=window.googletag||{cmd:[]};const t=document.createDocumentFragment();T.forEach(e=>{const s=document.createElement("SCRIPT");for(let t in e)s.setAttribute(t,e[t]);t.appendChild(s)}),document.head.appendChild(t)}(),y=!0,t())};let L=!1;const w=function(t,e,s){var n=window,i=n.document,o=i.createElement("script");if(s&&(o.id=s),o.language="javascript",o.type="text/javascript",o.charset="utf-8",o.async=1,o.src=t,n.ActiveXObject){var r=!1;o.onload=o.onreadystatechange=function(){r||this.readyState&&"complete"!==this.readyState&&("loaded"!==this.readyState||null==this.nextSibling)||(r=!0,e&&e(),o.onload=o.onreadystatechange=null)}}else o.onload=e;return(t=i.getElementsByTagName("script")[0]).parentNode.insertBefore(o,t),o},D=function(t){L?t():(window._MT_jsLoadDelayed=w,L=!0,t())};let O=!1;const k=[{src:"https://cdn.viqeo.tv/js/vq_starter.js",async:""}],I=function(t){O?t():(!function(){const t=document.createDocumentFragment();k.forEach(e=>{const s=document.createElement("SCRIPT");for(let t in e)s.setAttribute(t,e[t]);t.appendChild(s)}),document.head.appendChild(t)}(),O=!0,t())},x=class{constructor(){this._declare(arguments),this._addBidders(),this._display()}_declare(t){this.slotId=t[0].slotId,this.slotTag=t[0].slotTag,this.slotView=t[0].slotView,this.slotName=t[0].slotName,this.bannerData=this._updateBannersData(t[0].bannerData),this.devices=t[0].devices,this.callbacks={onSuccess:t[0].onSuccess,onLoad:t[0].onLoad,onStub:t[0].onStub,onError:t[0].onError},this.isDestroy=!1,this.isRefresh=this.bannerData.refresh,this.external,Object(r.a)("51",{slotId:this.slotId,state:"declare"})}_updateBannersData(t){const e=JSON.parse(JSON.stringify(t)),s=e.code;s.containerId=this.slotId,s.onLoad=this._onRender.bind(this),s.onRender=this._onLoad.bind(this),s.onError=this._onError.bind(this),s.onStub=this._onStub.bind(this);const n=e.adUnits;return n&&Object.keys(n).length&&(n.code=this.slotId),e}_addBidders(){let t=this.bannerData.adUnits;t&&Object.keys(t).length&&(this._updateAdUnits(t),window.Ya&&window.Ya.headerBidding?window.Ya.headerBidding.pushAdUnits(t):window.YaHeaderBiddingSettings.adUnits.push(t))}_updateAdUnits(t){if("grd_dm_inread"!==this.slotName&&"grd_dm_inread_abovefloor"!==this.slotName&&"grd_dm_inread_belowfloor"!==this.slotName)return;const e=t.bids;e&&e.forEach(e=>{switch(e.bidder){case"adriver":try{e.params.additional.ext.query+="&cid="+localStorage.getItem("adrcid")}catch(t){}Object(r.a)("update AdUnits",!1,"log",t)}})}_display(){const t=this.bannerData.code;"fullscreen"===this.slotView&&(t.type=this.slotView);const e=["phone","tablet","desktop"],s=o.a.get("breakpoints"),n=(()=>{const t={};return Object.keys(s).forEach((e,n)=>{t[e+"Width"]=s[e]}),t})();window.yaContextCb.push(()=>{this.external=Ya.adfoxCode.createAdaptive(t,e,n)})}_onRender(){this.isDestroy||(this.callbacks.onSuccess(),Object(r.a)("51",{slotId:this.slotId,state:"onLoad"}))}_onLoad(){this.isDestroy||("branding"===this.slotView||this.slotTag.firstElementChild?this.callbacks.onLoad():(Object(r.a)("this.slotTag.firstElementChild empty"),this._onError()))}_onError(){Object(r.a)("51",{slotId:this.slotId,state:"onError"}),this.isDestroy||this.callbacks.onError()}_onStub(){Object(r.a)("51",{slotId:this.slotId,state:"onStub"}),this.isDestroy||this.callbacks.onStub()}reload(){window.Ya.adfoxCode.reload(this.slotId)}destroy(){if(!this.isDestroy){this.isDestroy=!0;try{window.Ya.adfoxCode.destroy(this.slotId)}catch(t){}}}},N=class{constructor(){this._declare(arguments),this._addBidders(),this._display()}_declare(t){this.slotId=t[0].slotId,this.bannerData=t[0].bannerData,this.devices=t[0].devices,this.breakpoints=t[0].breakpoints,this.callbacks={onSuccess:t[0].onSuccess,onLoad:t[0].onLoad,onStub:t[0].onStub,onError:t[0].onError},this.isDestroy=!1,this.isRefresh=this.bannerData.refresh,this.external=void 0}_addBidders(){const t=this.bannerData.code;let e=void 0;this._onSlotRenderEnded=t=>{e=t.isEmpty,t.isEmpty?this._onError():this._onRender()},this._onSlotLoaded=t=>{this.isDestroy||this.callbacks.onLoad()},googletag.cmd.push(()=>{this.external=googletag.defineSlot(t.codeId,t.sizes,this.slotId).addService(googletag.pubads()),googletag.enableServices(),googletag.pubads().addEventListener("slotRenderEnded",this._onSlotRenderEnded),googletag.pubads().addEventListener("slotOnload",this._onSlotLoaded)})}_display(){googletag.cmd.push(()=>{googletag.display(this.slotId)})}_onLoad(){}_onRender(){this.isDestroy||(this.callbacks.onSuccess(),Object(r.a)("51",{slotId:this.slotId,state:"onLoad"}))}_onError(){this.isDestroy||this.callbacks.onError()}_onStub(){this.isDestroy||this.callbacks.onStub()}reload(){googletag.cmd.push(()=>{googletag.pubads().refresh([this.external])})}destroy(){this.isDestroy||(this.isDestroy=!0,googletag.cmd.push(()=>{try{googletag.destroySlots([this.external])}catch(t){}try{googletag.pubads().removeEventListener("slotRenderEnded",this._onSlotRenderEnded)}catch(t){}try{googletag.pubads().removeEventListener("slotOnload",this._onSlotLoaded)}catch(t){}}),this.external=void 0)}},B=class{constructor(){this._declare(arguments),this._addBidders(),this._display()}_declare(t){this.slotId=t[0].slotId,this.slotTag=t[0].slotTag,this.bannerData=this._updateBannersData(t[0].bannerData),this.devices=t[0].devices,this.callbacks={onSuccess:t[0].onSuccess,onLoad:t[0].onLoad,onStub:t[0].onStub,onError:t[0].onError},this.isDestroy=!1,this.isRefresh=this.bannerData.refresh,this.external,Object(r.a)("51",{slotId:this.slotId,state:"declare"})}_updateBannersData(t){return JSON.parse(JSON.stringify(t))}_addBidders(){this.frameTag=document.createElement("DIV"),this.frameTagId="_mt_ot_container_"+this.bannerData.code.codeId,this.slotTag.append(this.frameTag)}_display(){this._addId(),this._addObserver(),this._loadScript()}_addObserver(){this.observer=new MutationObserver(t=>{this._deleteId(),this._onRender(),this._onLoad()}),this.observer.observe(this.frameTag,{childList:!0})}_loadScript(){const t=window;var e=t.document;t._mt_rnd=t._mt_rnd||Math.floor(1e6*Math.random()),t._mt_referrer=t._mt_referrer||encodeURIComponent(e.referrer||""),t._mt_location=t._mt_location||(t.parent!==t?encodeURIComponent(e.referrer):encodeURIComponent(e.location.href)),this.script=t._MT_jsLoadDelayed("https://otclick-adv.ru/core/code.js?pid="+this.bannerData.code.codeId+"&rid="+t._mt_rnd+"&rl="+t._mt_referrer+"&ll="+t._mt_location+"&ow="+t.outerWidth+"&oh="+t.outerHeight+"&sw="+t.screen.width+"&sh="+t.screen.height+"&pd="+t.screen.pixelDepth+"&f="+(t.top==t?0:1),this._onLoadScript.bind(this))}_onLoadScript(){}_deleteId(){this.frameTag.removeAttribute("id")}_addId(){this.frameTag.id=this.frameTagId}_onRender(){this.isDestroy||(this._clearObserver(),this.callbacks.onSuccess())}_clearObserver(){this.observer&&this.observer.disconnect()}_onLoad(){this.isDestroy||this.callbacks.onLoad()}_onError(){Object(r.a)("51",{slotId:this.slotId,state:"onError"}),this.isDestroy||this.callbacks.onError()}_onStub(){Object(r.a)("51",{slotId:this.slotId,state:"onStub"}),this.isDestroy||this.callbacks.onStub()}reload(){this._reset(),this._display()}_reset(){this._clearObserver(),this._removeScript(),this._clearContainer()}_removeScript(){this.script&&this.script.remove()}_clearContainer(){this.frameTag&&(this.frameTag.innerHTML="")}destroy(){this.isDestroy||(this.isDestroy=!0,this._reset())}},A=class{constructor(){this._declare(arguments),this._display()}_declare(t){this.slotId=t[0].slotId,this.slotTag=t[0].slotTag,this.slotView=t[0].slotView,this.bannerData=this._updateBannersData(t[0].bannerData),this.devices=t[0].devices,this.callbacks={onSuccess:t[0].onSuccess,onLoad:t[0].onLoad,onError:t[0].onError},this.isDestroy=!1,this.isRefresh=this.bannerData.refresh,this.external,Object(r.a)("51",{slotId:this.slotId,state:"declare"})}_updateBannersData(t){return JSON.parse(JSON.stringify(t))}_display(){this._checkView()&&(this._addHTML(),this._addObserver())}_checkView(){if("sticker"!==this.slotView)return!0;console.warn("Баннер Viqeo в слоте "+this.slotId+" не поддерживает тип sticker и показан не будет"),setTimeout(()=>{this.callbacks.onError()})}_addObserver(){this.observer=new MutationObserver(t=>{t.some(t=>{if("attributes"===t.type&&"0px"!==this.frameTag.style.paddingBottom)return this._onRender(),this._onLoad(),!0})}),this.observer.observe(this.frameTag,{attributes:!0})}_addHTML(){const t=`\n                    <div style="width:100%;height:0;position:relative;padding-bottom:0px;" class="viqeo-embed" data-playerId="${this.bannerData.code.codeId}" data-profile="${this.bannerData.code.ownerId}">\n                        <iframe src="https://cdn.viqeo.tv/embed?playerId=${this.bannerData.code.codeId}" width="100%" height="100%" style="position:absolute" frameBorder="0" allowFullScreen></iframe>\n                    </div>`;this.slotTag.insertAdjacentHTML("afterbegin",t),this.frameTag=this.slotTag.querySelector("div")}_onRender(){this.isDestroy||(this._clearObserver(),this.callbacks.onSuccess())}_clearObserver(){this.observer&&this.observer.disconnect()}_onLoad(){this.isDestroy||this.callbacks.onLoad()}_reset(){this._clearObserver(),this._clearContainer()}_clearContainer(){this.frameTag&&(this.frameTag.innerHTML="")}destroy(){this.isDestroy||(this.isDestroy=!0,this._reset())}},C=class{constructor(){this._declare(arguments),this._display()}_declare(t){this.slotId=t[0].slotId,this.slotTag=t[0].slotTag,this.slotView=t[0].slotView,this.bannerData=this._updateBannersData(t[0].bannerData),this.devices=t[0].devices,this.callbacks={onSuccess:t[0].onSuccess,onLoad:t[0].onLoad,onError:t[0].onError},this.isDestroy=!1,this.isRefresh=this.bannerData.refresh,this.external,Object(r.a)("51",{slotId:this.slotId,state:"declare"})}_updateBannersData(t){return JSON.parse(JSON.stringify(t))}_display(){this._checkView()&&(this._addHTML(),this._reloadScripts(),this._onRender(),setTimeout(()=>{this._onLoad()}))}_checkView(){if("sticker"!==this.slotView)return!0;console.warn("Баннер Viqeo в слоте "+this.slotId+" не поддерживает тип sticker и показан не будет"),setTimeout(()=>{this.callbacks.onError()})}_addHTML(){this.slotTag.innerHTML=this.bannerData.code}_reloadScripts(){this.slotTag.querySelectorAll("script").forEach((function(t){const e=t.getAttribute("src");if(e){document.createElement("script").src=e}else{const e=document.createElement("script");e.text=t.innerHTML,t.parentNode.replaceChild(e,t)}}))}_onRender(){this.isDestroy||this.callbacks.onSuccess()}_onLoad(){this.isDestroy||this.callbacks.onLoad()}_reset(){this._clearContainer()}_clearContainer(){this.frameTag&&(this.frameTag.innerHTML="")}destroy(){this.isDestroy||(this.isDestroy=!0,this._reset())}};var R=function(t){var e,s,n=t.box,i=t.callback||!1,o=!1,r=t.time||3e4,c=t.repeat||"infinite",d=0,l=0,h=0,u=!1,g=function(){document.hidden?v():f()},f=function(){var t,e,s;(t=n.getBoundingClientRect(),e=t.top+t.height/2,s=t.left+t.width/2,e>0&&s>0&&e<(window.innerHeight||document.documentElement.clientHeight)&&s<(window.innerWidth||document.documentElement.clientWidth))?o||(h=Date.now(),o=setTimeout((function(){i();++d,l=0,o=!1,("infinite"===c||c>d)&&f()}),r-l)):v()},v=function(){o&&(clearTimeout(o),o=!1,l+=Date.now()-h)},m=function(){u||(e=a("scroll",f),s=a("resize",f),document.addEventListener("visibilitychange",g,!1),document.hidden||f())};return"complete"===document.readyState?m():window.addEventListener("load",m,{once:!0}),{clear:function(){u||(u=!0,clearTimeout(o),e&&e.tag.removeEventListener(e.eName,e.func),s&&s.tag.removeEventListener(s.eName,s.func),document.removeEventListener("visibilitychange",g,!1),window.removeEventListener("load",m,{once:!0}))}}};const V=class{constructor(){}activate(){this._declare(arguments),this.changeState("activated"),this._run()}_declare(t){this.name=t[0],this.tag=t[1],this.queue=this._getQueue(t[2].blocks),this.devices=t[2].devices,this.view=t[2].view||i.a.SLOT_VIEW,this.slotTag=this._createWrapper(),this.uid=this._applyId(),this.fillValue=t[2].fill||i.a.SLOT_FILL,this.fillBottom=t[2].fillBottom||i.a.SLOT_FILL_BOTTOM,this.banners=new class{constructor(){this._declare()}_declare(){this.items=[]}addListener(t,e){document.addEventListener(i.a.EVENTS.BANNERS[t],e)}removeListener(t,e){document.removeEventListener(i.a.EVENTS.BANNERS[t],e)}add(t){const e=new class{constructor(){}activate(){this._declare(arguments),this.changeState("activated"),this._addSystem()}_declare(t){this.bannerData=t[0].bannerData,this.type=this.bannerData.type,this.queueIndex=t[0].queueIndex,this.slotId=t[0].slotId,this.slotTag=t[0].slotTag,this.slotView=t[0].slotView,this.slotName=t[0].slotName,this.devices=t[0].devices,this.breakpoints=t[0].breakpoints,this.callbacks={onSuccess:t[0].onSuccess,onLoad:t[0].onLoad,onError:t[0].onError},this.bannerTimeout=i.a.BANNERTIMEOUT,this.clearTrackLoadingTime=void 0,this.checkVisibilityReturned=void 0,this.banner=void 0,this.isReloading=!1}changeState(t){t&&(this.state=t);let e=new Event(i.a.EVENTS.BANNER.CHANGESTATE);e.args={state:this.state,banner:this},this.slotTag.dispatchEvent(e)}_addSystem(){!function(t){const e={adfox:E,google:S,otclick:D,viqeo:I};e[t.type]?e[t.type](t.onReady):t.onReady()}({type:this.type,onReady:this.onReadySystem.bind(this)})}onReadySystem(){const t={adfox:x,google:N,otclick:B,viqeo:A,native:C};t[this.type]?(this._addTrackLoadingTime(),this.changeState("launch"),this.banner=new t[this.type]({slotId:this.slotId,slotTag:this.slotTag,slotView:this.slotView,slotName:this.slotName,devices:this.devices,bannerData:this.bannerData,onSuccess:this._onSuccess.bind(this),onLoad:this._onLoad.bind(this),onStub:this._onStub.bind(this),onError:this._onError.bind(this)}),this._addReload()):this._onError()}_trackLoadingTime(){return setTimeout(()=>{Object(r.a)("Банер грузится более установленного времени",!1,"warn",this.slotTag),this._onError()},this.bannerTimeout)}_addTrackLoadingTime(){this._clearTrackLoadingTime(),this.clearTrackLoadingTime=this._trackLoadingTime()}_clearTrackLoadingTime(){clearTimeout(this.clearTrackLoadingTime),this.clearTrackLoadingTime=void 0}_onSuccess(){this.isReloading||this.isSuccess||(this.isSuccess=!0,this._clearTrackLoadingTime(),this.changeState("success"),this.callbacks.onSuccess())}_onLoad(){this.isReloading||(this.changeState("loaded"),this.callbacks.onLoad())}_addReload(){const t=this.bannerData.refresh;if(!t||"viqeo"===this.type||"native"===this.type||"fullscreen"===this.slotView)return;const e=1e3*t,s=()=>{this.isDestroy||this._reload()};if("sticker"===this.slotView)this.clearReload=setInterval(s,e);else{const t={box:this.slotTag,time:e,callback:s};this.checkVisibilityReturned=R(t)}}_reload(){this.isReloading=!0,this.banner.reload()}_onStub(){this._onError()}_onError(){this.changeState("error"),this.callbacks.onError()}destroy(){clearTimeout(this.clearTrackLoadingTime),clearInterval(this.clearReload),this.checkVisibilityReturned&&(this.checkVisibilityReturned.clear(),this.checkVisibilityReturned=void 0),this.banner.destroy(),this.isDestroy=!0}};return this.beforeAdd(t,e),e.activate(t),this.items.push(e),e}beforeAdd(t,e){let s=new Event(i.a.EVENTS.BANNERS.BEFOREADD);s.args={data:t,banner:e},t.slotTag.dispatchEvent(s)}},this.curBannerIndex=-1}changeState(t){t&&(this.state=t);let e=new Event(i.a.EVENTS.SLOT.CHANGESTATE);e.args={state:this.state,slot:this},this.tag.dispatchEvent(e)}_getQueue(t){return t[0].type?t:this._getQueueByPriority(t)}_getQueueByPriority(t){const e=function(t){return t.sort((t,e)=>{const s=parseInt(t.proc),n=parseInt(e.proc);return function(t,e){let s=t-.5+Math.random()*(e-t+1);return s=Math.round(s),s}(1,s+n)>n?-1:1})},s=[];return t.forEach(t=>{s.push(e(t)[0])}),s}handleEvent(t){this.destroy()}_applyId(){let t;return this.slotTag.hasAttribute("id")?t=this.slotTag.getAttribute("id"):(t="advertronic-"+Math.floor((new Date).getTime()+1e10*Math.random()),this.slotTag.setAttribute("id",t)),t}_run(){"immediately"===this.fillValue?this._fillImmediately():this._fillByObserver()}_fillByScroll(){const t=()=>{pageYOffset>100&&(this._cancelThrottle(this.thScrollObj),this._fillImmediately())};this.thScrollObj=a("scroll",t),t()}_cancelThrottle(t){t&&(t.tag.removeEventListener(t.eName,t.func),t=void 0)}_fillImmediately(){this.changeState("filling"),this.fill()}_fillByObserver(){this.observer=new IntersectionObserver((t,e)=>{t.forEach(t=>{t.isIntersecting&&(e.disconnect(),this.observer=void 0,this._fillImmediately())})},{rootMargin:"0px 0px "+this.fillBottom+" 0px"}),this.observer.observe(this.tag)}_checkDevice(){return-1!==this.devices.indexOf(o.a.get("device"))}_onSuccessBanner(){}_onLoadBanner(){}_onErrorBanner(){this._destroyBanner(),this.fill()}_destroyBanner(){this._cancelThrottle(this.thScrollObj);const t=this.banners.items[this.curBannerIndex];t&&(t.destroy(),this.banners.items[this.curBannerIndex]=null),""!==this.slotTag.innerHTML&&(this.slotTag.innerHTML="")}fill(){if(this.isDestroy)return;if("filling"!==this.state)return;if(this.banners.items[this.curBannerIndex])return;if(!this._checkDevice())return;++this.curBannerIndex;let t=this.queue[this.curBannerIndex];if(!t)return this.changeState("empty"),void this.destroy();this.banners.add({slotId:this.uid,slotTag:this.slotTag,slotView:this.view,slotName:this.name,devices:this.devices,bannerData:t,queueIndex:this.curBannerIndex,onSuccess:this._onSuccessBanner.bind(this),onLoad:this._onLoadBanner.bind(this),onError:this._onErrorBanner.bind(this)})}updateToDevice(){if(this._checkDevice())return this.fill(),!0;this._removeBannerToDevice()}getCurrentBanner(){return this.banners?this.banners.items[this.curBannerIndex]:void 0}_removeBannerToDevice(){this._destroyBanner(),this._destroyWrapper(),this.curBannerIndex=-1}destroy(){this._destroyBanner(),this._destroyWrapper(),this.isDestroy=!0}},j=class extends V{constructor(){super()}_createWrapper(){return this.tag}_destroyWrapper(){}},M=class extends V{constructor(){super()}_createWrapper(){return document.body.insertAdjacentHTML("beforeend",'\n            <sticker-wrapper style="position:fixed; left:0; bottom: 0px; display:block; width:100%; z-index: 99999998; background-color: #ffffff;">\n                <sticker-slotWrapper style="display:flex; box-sizing:border-box; width:100%; height:auto; max-height: 100px; overflow: hidden;  align-items: center; justify-content: center;">\n                    <sticker-slot></sticker-slot>\n                </sticker-slotWrapper>\n                <sticker-close style="z-index: 99999999;position: absolute;top: -23px;right: 15px;display: none;">\n                    <svg width="48" height="23" viewBox="0 0 48 23" fill="none" xmlns="http://www.w3.org/2000/svg">\n                        <path d="M4.63486 5.23305C5.43894 2.15074 8.22271 0 11.4082 0H36.5918C39.7773 0 42.5611 2.15073 43.3651 5.23305L48 23H0L4.63486 5.23305Z" fill="#D2D6DF"/>\n                        <rect x="18.0002" y="7.41422" width="2" height="14" rx="1" transform="rotate(-45 18.0002 7.41422)" fill="#595D65"/>\n                        <rect width="2" height="14" rx="1" transform="matrix(-0.707107 -0.707107 -0.707107 0.707107 29.3137 7.41422)" fill="#595D65"/>\n                    </svg>\n                </sticker-close>\n            </sticker-wrapper>\n        '),this.stickerTag=document.body.lastElementChild,this.closeTag=this.stickerTag.querySelector("sticker-close"),this.closeTag.addEventListener("click",this,{once:!0}),this.stickerTag.querySelector("sticker-slot")}_run(){this._fillByScroll()}_onLoadBanner(){this.stickerTag.style.borderTop="2px solid #D2D6DF",this.closeTag.style.display="block"}_destroyWrapper(){this.closeTag.removeEventListener("click",this),this.stickerTag.remove(),this.slotTag=void 0,this.closeTag=void 0,this.stickerTag=void 0}};class H extends HTMLElement{connectedCallback(){this.shadow=this.attachShadow({mode:"closed"}),this.shadow.innerHTML="\n            <style>\n                :host{\n                    --advertronic-notice-right:2px;\n                    --advertronic-notice-bottom:2px;\n                    position: fixed;\n                    z-index: 9000;\n                    bottom: var(--advertronic-notice-bottom);\n                    right:var(--advertronic-notice-right);\n                    max-width:calc(100% - var(--advertronic-notice-right));\n                    max-height:270px;\n                    box-sizing: border-box;\n                    visibility: hidden;\n                }\n                \n                :host(.advertronicNotice-active){\n                    visibility: visible;\n                }\n                \n                .frame{\n                    margin: 0;\n                    /*box-shadow: 0 0 15px 1px #6c6c6c;*/\n                    transform: translateY(calc(100% + var(--advertronic-notice-bottom)));\n                    transition: transform .15s ease-in-out;\n                    border-radius: 4px;\n                }\n                \n                :host(.advertronicNotice-active) .frame {\n                    transform: translateY(0);\n                }\n                \n                .close{\n                    position:absolute;\n                    right:var(--advertronic-notice-close-right, 5px);\n                    top:var(--advertronic-notice-close-top, 5px);\n                    width:var(--advertronic-notice-close-size, 20px);\n                    height:var(--advertronic-notice-close-size, 20px);\n                    background-position: 50% 50%;\n                    background-repeat: no-repeat;\n                    background-size:contain;\n                    background-image: var(--advertronic-notice-close-bg-image, url(\"data:image/svg+xml,%3Csvg width='30' height='30' viewBox='0 0 30 30' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Crect width='30' height='30' rx='15' fill='black' fill-opacity='0.3'/%3E%3Cpath d='M20 10L10 20' stroke='white' stroke-linecap='round' stroke-linejoin='round'/%3E%3Cpath d='M10 10L20 20' stroke='white' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E%0A\"));\n                    cursor: pointer;\n                    z-index:2;\n                }\n                \n                @media (hover:hover){\n                    @keyframes close {\n                        0% {\n                            transform: scale(1);\n                        }\n\n                        50% {\n                            transform: scale(1.3);\n                        }\n\n                        100% {\n                            transform: scale(1);\n                        }\n                    }\n\n                    .close:hover {\n                        animation: 0.5s ease-in-out close;\n                    }\n                }\n            </style>\n            <div class=\"frame\">\n                <div class=\"content\">\n                    <slot name=\"slot\"></slot>\n                </div>\n                <div class=\"close\"></div>\n            </div>\n        ",this._addEvents()}_addEvents(){this.shadow.addEventListener("click",this,{once:!0})}handleEvent(){let t=new Event(i.a.EVENTS.SLOT.CLOSE);this.dispatchEvent(t)}}const q=class extends V{constructor(){super()}_createWrapper(){const t="advertronic-notice";customElements.get(t)||customElements.define(t,H);return document.body.insertAdjacentHTML("beforeend",'\n            <advertronic-notice>\n                <advertronic-notice-slot slot="slot"></advertronic-notice-slot>\n            </advertronic-notice>\n        '),this.noticeTag=document.body.lastElementChild,this.noticeTag.addEventListener(i.a.EVENTS.SLOT.CLOSE,this,{once:!0}),this.noticeTag.addEventListener(i.a.EVENTS.SLOT.EXTERNAL,this),this.noticeTag.querySelector("advertronic-notice-slot")}_run(){this._fillByScroll()}_onLoadBanner(){this.noticeTag.classList.add("advertronicNotice-active")}_destroyWrapper(){this.noticeTag.removeEventListener(i.a.EVENTS.SLOT.CLOSE,this),this.noticeTag.removeEventListener(i.a.EVENTS.SLOT.EXTERNAL,this),this.noticeTag.remove(),this.noticeTag=void 0}addPopupCssText(t){this.noticeTag.style.cssText=t}handleEvent(t){t.type===i.a.EVENTS.SLOT.CLOSE?this.destroy():t.type===i.a.EVENTS.SLOT.EXTERNAL&&(t.stopPropagation(),this.tag.dispatchEvent(new CustomEvent(i.a.EVENTS.SLOT.EXTERNAL,{bubbles:!0,composed:!0,detail:{targetEvent:t,slot:this}})))}},P={items:[],addListener:function(t,e){document.addEventListener(i.a.EVENTS.SLOTS[t],e)},removeListener:function(t,e){document.removeEventListener(i.a.EVENTS.SLOTS[t],e)},add:function(t,e,s){const n=this.getNewSlot(s);return this.beforeAdd(t,e,s,n),n.activate(t,e,s),this.items.push(n),n},getNewSlot(t){const e={sticker:M,notice:q,branding:j,fullscreen:j};if(e[i.a.SLOT_VIEW]=j,e[t.view])return new e[t.view]},beforeAdd:function(t,e,s,n){let o=new Event(i.a.EVENTS.SLOTS.BEFOREADD);o.args={tag:e,slot:n},document.dispatchEvent(o)},getBySelector:function(t){return this.items.find((e,s,n)=>e.tag.matches(t))}};(function(){if(window.advertronic&&window.advertronic.isRun)return;window.advertronic=window.advertronic||{cmd:[]};const t=window.advertronic;t.isRun=!0,Object(r.a)("0",{version:i.a.VERSION});let e=void 0;const s=P,a=[];let c=!1,d=!1;const l=function(){s.items.forEach(t=>{t.updateToDevice()})},h=function(){!function(t){var e,s=function(){document.addEventListener?(document.removeEventListener("DOMContentLoaded",n,!1),window.removeEventListener("load",n,!1)):(document.detachEvent("onreadystatechange",n),window.detachEvent("onload",n))},n=function(){(document.addEventListener||"load"===event.type||"complete"===document.readyState)&&(s(),i())},i=function(){e||(e=!0,t())};if("complete"===document.readyState)setTimeout(i);else if(document.addEventListener)document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1);else{document.attachEvent("onreadystatechange",n),window.attachEvent("onload",n);var o=!1;try{o=null==window.frameElement&&document.documentElement}catch(t){}o&&o.doScroll&&function t(){if(!e){try{o.doScroll("left")}catch(e){return setTimeout(t,50)}s(),i()}}()}}((function(){u(l),document.querySelectorAll("advertronic-slot").forEach(f),function(t,e){const s=function(s){for(let n of s){for(let e of n.addedNodes)if(e instanceof HTMLElement){e.matches("advertronic-slot")&&t(e);for(let s of e.querySelectorAll("advertronic-slot"))t(s)}for(let t of n.removedNodes)if(t instanceof HTMLElement){t.matches("advertronic-slot")&&e(t);for(let s of t.querySelectorAll("advertronic-slot"))e(s)}}};!function(){if(!MutationObserver)return;new MutationObserver(s).observe(document,{childList:!0,subtree:!0})}()}(f,v)}))},f=function(t){const n=t.getAttribute("data-name"),i=e.banners[n];if(i){s.add(n,t,i)}else Object(r.a)("31",{name:n})},v=function(){},m=function(t={}){o.a.set("bidding",{biddersMap:t,adUnits:[],timeout:i.a.BIDDERSTIMEOUT})},b=function(t){o.a.set("breakpoints",t)},_=function(){c=!0,a.forEach(E)},p={init:function(t){c||d||(d=!0,async function(t){const e=i.a.GETPATH(t.userId),s=await fetch(e),n=await s.json();let o=i.a.LANG;try{o=s.headers.get(i.a.GEOHEADER).toLowerCase()}catch(t){}if(Object(r.a)("13",{lang:o}),n[o]&&n.breakpoints)return{langData:n[o],breakpoints:n.breakpoints};throw new Error("12")}(t).then(s=>{!function(t,s){d=!1,m(s.langData.bidders),b(s.breakpoints),e=s.langData,t.mode&&"auto"!==t.mode||h(),_()}(t,s)}).catch(t=>{}))},watchSlotState:g},E=function(t){if("object"==typeof t){for(let e in t)if(t.hasOwnProperty(e)){const s=t[e];if(!p[e])return void Object(r.a)("21",{name:e});c||"init"===e?p[e](s):a.push({[e]:s})}}else"function"==typeof t&&(c?t(n):a.push(t))};t.cmd.forEach(E),t.cmd.push=E})()}]);